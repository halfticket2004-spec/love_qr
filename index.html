<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Love â¤ï¸</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg,#fbd3e9,#bb377d);
  font-family:Georgia,serif;
  color:white;
  text-align:center;
}
.container{padding:15px}
input{
  width:80%;padding:14px;font-size:20px;
  border:none;border-radius:12px;text-align:center
}
button{
  padding:14px 30px;font-size:18px;
  border:none;border-radius:25px;
  background:white;color:#bb377d;
  margin-top:15px
}
.flower{
  position:absolute;top:-40px;
  animation:fall linear infinite
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}

/* page flip */
.page{
  animation:flip 0.8s ease forwards;
}
@keyframes flip{
  from{transform:rotateY(0deg)}
  to{transform:rotateY(180deg)}
}

.maze-wrap{
  position:relative;
  display:inline-block;
}
.maze-wrap img{
  width:360px;
}
.maze-overlay{
  position:absolute;
  top:0;left:0;
}
.girl, .boy{
  position:absolute;
  font-size:28px;
}
.girl{left:10px; top:10px;}
.boy{right:10px; bottom:10px;}

.gifts{
  display:flex;justify-content:center;
  gap:20px;margin-top:25px
}
.gift{
  width:80px;height:80px;
  background:#ff4f81;
  border-radius:15px;
  font-size:40px;
  display:flex;align-items:center;justify-content:center;
  animation:bounce 1s infinite alternate
}
@keyframes bounce{
  from{transform:translateY(0)}
  to{transform:translateY(-20px)}
}
.controls{
  display:flex;justify-content:center;
  gap:40px;margin-top:10px
}
.letter{
  background:white;color:#bb377d;
  padding:25px;border-radius:20px;
  margin:20px;font-size:20px
}
canvas{touch-action:none}
</style>
</head>

<body>

<audio id="bgMusic" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4b6b6f87f1.mp3">
</audio>

<div class="container" id="app">
<h1>yevaru ra nuvvu ğŸ‘€</h1><br>
<button onclick="startExperience()">Tap to start â¤ï¸</button><br><br>
<input id="answer" placeholder="Type here">
<br>
<button onclick="check()">Submit</button>
</div>

<script>
// flowers
for(let i=0;i<25;i++){
 let f=document.createElement("div");
 f.className="flower"; f.innerHTML="ğŸŒ¸";
 f.style.left=Math.random()*100+"vw";
 f.style.animationDuration=5+Math.random()*6+"s";
 document.body.appendChild(f);
}

// music
function startExperience(){
 document.getElementById("bgMusic").play().catch(()=>{});
}

// entry
function check(){
 let v=document.getElementById("answer").value.trim().toLowerCase();
 if(v==="its me") mazeGame();
 else document.getElementById("app").innerHTML=
 "<h2>yevaru nanna rey nuvvu..</h2><h2>vellipora nanna ğŸ˜¤</h2>";
}

/* MAZE GAME â€” EXACT IMAGE */
function mazeGame(){
 document.getElementById("app").innerHTML=
 `<h2>Find him â¤ï¸</h2>
 <p>Every path inside failsâ€¦ love finds a way around</p>

 <div class="maze-wrap">
   <img src="IMG_20260129_180303.png">
   <canvas class="maze-overlay" id="draw" width="360" height="360"></canvas>
   <div class="girl">ğŸ‘©</div>
   <div class="boy">ğŸ‘¦</div>
 </div>`;

 const c=document.getElementById("draw");
 const x=c.getContext("2d");
 let drawing=false, escaped=false;

 c.addEventListener("pointerdown",e=>{
  drawing=true;
  x.beginPath();
  x.moveTo(e.offsetX,e.offsetY);
 });
 c.addEventListener("pointerup",()=>drawing=false);
 c.addEventListener("pointermove",e=>{
  if(!drawing) return;
  let dx=e.offsetX, dy=e.offsetY;
  x.strokeStyle="#ff69b4";
  x.lineWidth=3;
  x.lineTo(dx,dy); x.stroke();

  if(dx<0 || dy<0 || dx>360 || dy>360) escaped=true;

  if(escaped && dx>300 && dy>300){
    setTimeout(mazeGifts,500);
  }
 });
}

// gifts after maze
function mazeGifts(){
 document.getElementById("app").innerHTML=
 `<div class="gifts">
  <div class="gift" onclick="mazeLetter()">ğŸ</div>
  <div class="gift" onclick="mazeLetter()">ğŸ</div>
  <div class="gift" onclick="mazeLetter()">ğŸ</div>
  <div class="gift" onclick="mazeLetter()">ğŸ</div>
 </div>`;
}

function mazeLetter(){
 document.getElementById("app").innerHTML=
 `<div class="letter page">
  i promise you ğŸ’Œ<br><br>
  Even on the most chaotic and ordinary days,<br>
  Iâ€™ll find a way to make you smile ğŸ˜<br><br>
  Just the way you found your way in the game ğŸ’–
  <br><br>
  <button onclick="finalPromise('car')">Next ğŸ“–</button>
 </div>`;
}

/* CAR GAME (unchanged, working) */
function carGame(){
 document.getElementById("app").innerHTML=
 `<h2>Survive 1 minute ğŸš—</h2>
 <canvas id="road" width="300" height="420"></canvas>
 <div class="controls">
  <button onclick="moveL()">â¬…ï¸</button>
  <button onclick="moveR()">â¡ï¸</button>
 </div>
 <p id="timer">Time: 60</p>`;

 const c=document.getElementById("road");
 const x=c.getContext("2d");
 let car={x:130,y:350},obs=[],start=Date.now();

 window.moveL=()=>{if(car.x>90) car.x-=30}
 window.moveR=()=>{if(car.x<200) car.x+=30}

 function loop(){
  x.clearRect(0,0,300,420);
  x.fillStyle="#444";x.fillRect(80,0,140,420);
  x.font="28px serif";x.fillText("ğŸš—",car.x,car.y);

  if(Math.random()<0.04)
    obs.push({x:90+Math.random()*120,y:-20});

  for(let o of obs){
    o.y+=4;x.fillText("ğŸš™",o.x,o.y);
    if(Math.abs(o.x-car.x)<25 && Math.abs(o.y-car.y)<25){
      carGame();return;
    }
  }
  obs=obs.filter(o=>o.y<450);

  let t=60-Math.floor((Date.now()-start)/1000);
  document.getElementById("timer").innerText="Time: "+t;
  if(t<=0){ finalPromise('end'); return; }

  requestAnimationFrame(loop);
 }
 loop();
}

// After car gifts
function carGifts(){
 document.getElementById("app").innerHTML=
 `<h2>You made it ğŸ’–</h2>
 <div class="gifts">
  <div class="gift" onclick="carLetter()">ğŸ</div>
  <div class="gift" onclick="carLetter()">ğŸ</div>
  <div class="gift" onclick="carLetter()">ğŸ</div>
  <div class="gift" onclick="carLetter()">ğŸ</div>
 </div>`;
}

function carLetter(){
 document.getElementById("app").innerHTML=
 `<div class="letter">
 i promise you ğŸ’Œ<br><br>
 On gloomy and bad days,<br>
 I will reach you through all the hurdles<br>
 as fast as I can ğŸ«¶<br><br>
 just the way you did in the game ğŸ’–
 </div>`;
}


// final promise page
function finalPromise(next){
 document.getElementById("app").innerHTML=
 `<div class="letter page">
  I promise you ğŸ’–<br><br>
  I will stay with you<br>
  until the last page of my book ğŸ«‚<br><br>
 </div>`;
}

</script>

</body>
</html>
